<html>

    <head>
        <meta charset="utf-8">
        <title>My Product</title>
        <base target="_self">
        <meta content="NODE JS HBS MYSQL CRUD EXAMPLE" name="description"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="google" value="notranslate">
        <link
        href="/images/cp_ico.png" rel="shortcut icon">

        <!--stylesheets / link tags loaded here-->

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"/>


        <style>
            type="text/css" body,
            html {
                height: 100%;
            }
            /* workaround modal-open padding issue */

            body.modal-open {
                padding-right: 0 !important;
            }

            #sidebar {
                padding-left: 0;
            }
            body {
                margin-bottom: $height-footer;
            }
            #footer {
                bottom: 0;
                width: 100%;
                position: absolute;
                height: $height-footer;
                background-color: #f5f5f5;
                .footer-block {
                    margin: 20px 0;
                }
            }
        </style>

    </head>
    <body>
        <nav class="navbar navbar-fixed-top navbar-toggleable-sm navbar-inverse bg-primary mb-3">
            <button class="navbar-toggler navbar-toggler-right" data-target="#collapsingNavbar" data-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="flex-row d-flex">
                <a class="navbar-brand mb-1" href="#">{{msg}}</a>
                <button class="hidden-md-up navbar-toggler" data-toggle="offcanvas" title="Toggle responsive left sidebar" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse" id="collapsingNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home
                            <span class="sr-only">Home</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://codeinaja.net">Codeinaja.net</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" data-target="#myModal" data-toggle="modal" href="">About</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container" id="main">
            <h4 class="">
                My Product
            </h4>
            <br>
            <button class="btn btn-primary mb-3" data-target="#myModalAdd" data-toggle="modal">
                <b>+</b>Add New</button>
            <div class="table-responsive">
                <table class="table table-bordered grocery-crud-table table-hover" id="mytable">
                    <thead class="thead-primary">
                        <tr>
                            <th>Product ID</th>
                            <th>Product Name</th>
                            <th>Price</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each results}}
                            <tr>
                                <td>{{ dni }}</td>
                                <td>{{ name }}</td>
                                <td>{{ lastname }}</td>
                                <td>
                                    {{ occupation }}
                                </td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
        <!--/.container-->
        <div id="footer">
            <div class="container">
                <p class="footer-block">Codeinaja NODEJS - MYSQL - HBS - CRUD
                </p>
            </div>
        </div>


        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog" tabindex="-1">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">About</h4>
                        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                            <span aria-hidden="true">×</span>
                            <span class="sr-only">Close</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        This a simple crud implementation with node js,mysql and hbs template engine.
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                        <button class="btn btn-primary-outline" data-dismiss="modal">OK</button>
                    </div>
                </div>
            </div>
        </div>

        <form action="/save" method="post">
            <div class="modal fade" id="myModalAdd" role="dialog" tabindex="-1">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="myModalLabel">Add New Product</h4>
                            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                <span aria-hidden="true">×</span>
                                <span class="sr-only">Close</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="">Product Name</label>
                                <input class="form-control" name="product_name" placeholder="Product Name" required type="text">
                            </div>
                            <div class="form-group">
                                <label for="">Product Price</label>
                                <input class="form-control" name="product_price" placeholder="Price" required type="text">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                            <button class="btn btn-primary-outline" type="submit">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <form action="/update" method="post">
            <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="EditModal" role="dialog" tabindex="-1">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Edit Product</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <input class="form-control product_name" name="product_name" placeholder="Product Name" required type="text">
                            </div>

                            <div class="form-group">
                                <input class="form-control price" name="product_price" placeholder="Price" required type="text">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input class="product_id" name="id" type="hidden">
                            <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                            <button class="btn btn-primary" type="submit">Update</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <form action="/delete" id="add-row-form" method="post">
            <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="DeleteModal" role="dialog" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="myModalLabel">Delete Product</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <strong>Anda yakin mau menghapus data ini?</strong>
                        </div>
                        <div class="modal-footer">
                            <input class="form-control product_id2" name="product_id" required type="hidden">
                            <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                            <button class="btn btn-success" type="submit">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <!--scripts loaded here-->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>


        <script>
            $(document).ready(function () { // tampilkan data ke modal untuk edit
                $('#mytable').on('click', '.edit', function () {
                    var product_id = $(this).data('id');
                    var product_name = $(this).data('product_name');
                    var product_price = $(this).data('product_price');
                    $('#EditModal').modal('show');
                    $('.product_name').val(product_name);
                    $('.price').val(product_price);
                    $('.product_id').val(product_id);
                });
                // tampilkan modal hapus record
                $('#mytable').on('click', '.delete', function () {
                    var product_id = $(this).data('id');
                    $('#DeleteModal').modal('show');
                    $('.product_id2').val(product_id);
                });

            });
        </script>

    </body>

</html>
